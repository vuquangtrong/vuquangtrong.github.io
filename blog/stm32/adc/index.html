
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="There are many types of analog devices connected to microcontrollers. These analog device generate a variable voltage in a meaningful range. That voltage level is read and converted to a number through an Analog to Digital Converter." name="description"/>
<meta content="embedded systems application programming" name="keywords"/>
<meta content="vqtrong" name="author"/>
<link href="https://www.codeinsideout.com/blog/stm32/adc/" rel="canonical"/>
<link href="../../../favicon.png" rel="icon"/>
<meta content="mkdocs-1.2.2, mkdocs-material-7.1.11" name="generator"/>
<title>Analog to Digital Converter - Code Inside Out</title>
<link href="../../../assets/stylesheets/main.3754935a.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.f1a3b89f.min.css" rel="stylesheet"/>
<meta content="#ffffff" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Noto+Serif:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Noto Serif";--md-code-font-family:"Roboto Mono"}</style>
<link href="../../../assets/view-bigimg.css" rel="stylesheet"/>
<link href="../../../assets/extra.css" rel="stylesheet"/>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-42618265-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<meta content="website" property="og:type">
<meta content="Analog to Digital Converter - Code Inside Out" property="og:title">
<meta content="There are many types of analog devices connected to microcontrollers. These analog device generate a variable voltage in a meaningful range. That voltage level is read and converted to a number through an Analog to Digital Converter." property="og:description">
<meta content="https://www.codeinsideout.com/blog/stm32/adc/" property="og:url">
<meta content="https://www.codeinsideout.com/assets/banner.jpg" property="og:image">
<meta content="Code Inside Out" property="og:site_name">
<meta content="summary" name="twitter:card">
</meta></meta></meta></meta></meta></meta></meta></head>
<body data-md-color-accent="deep-orange" data-md-color-primary="white" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#1-analog-to-digital-converter">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Code Inside Out" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Code Inside Out">
<svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><path d="m278.9 511.5-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2 43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6 144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Code Inside Out
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              ADC
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../">
      Blog
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../projects/">
      Projects
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../archives/">
      Archives
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../tags/">
      Tags
    </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<style>
        .tag-cloud-toc {
            display: none;
        }
        @media screen and (max-width: 76.1875em) {
            .tag-cloud-toc {
                display: block;
            }
        }
    </style>
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Code Inside Out" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Code Inside Out">
<svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><path d="m278.9 511.5-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2 43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6 144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path></svg>
</a>
    Code Inside Out
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../" style="margin: initial; padding: initial; pointer-events: initial">
        
          Blog
        </a>
</label>
<nav aria-label="Blog" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../" style="margin: initial; padding: initial; pointer-events: initial">
          
            Blog
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../" style="margin: initial; padding: initial; pointer-events: initial">
        
          STM32
        </a>
</label>
<nav aria-label="STM32" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../" style="margin: initial; padding: initial; pointer-events: initial">
          
            STM32
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../intro/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../prepare/">
        Preparation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tools/">
        Toolchain
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docs/">
        Documents
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../clock/">
        Clock Tree
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../interrupt/">
        Interrupt
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../semihosting/">
        Semihosting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gpio/">
        GPIO
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dma/">
        DMA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../swv/">
        SWV
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../add-swo/">
        Add SWO
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../uart/">
        UART
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../uart-redirection/">
        UART Redirection
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../timer/">
        Timers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sensor-us-100/">
        US-100 Sensor
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link md-nav__link--active" href="./" style="margin: initial; padding: initial; pointer-events: initial">
          
            ADC
          </a>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        ADC
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-analog-to-digital-converter">
    1. Analog to Digital Converter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-calibration">
    2. Calibration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-conversion-clock">
    3. Conversion clock
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-conversion-modes">
    4. Conversion Modes
  </a>
<nav aria-label="4. Conversion Modes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-single-channel-single-conversion-mode">
    4.1. Single-Channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-multiple-channel-single-conversion-mode">
    4.2. Multiple-channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-single-channel-continuous-conversion-mode">
    4.3. Single-Channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#44-multiple-channel-continuous-conversion-mode">
    4.4. Multiple-channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#45-injected-conversion-mode">
    4.5. Injected Conversion Mode
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-channel-selection">
    5. Channel Selection
  </a>
<nav aria-label="5. Channel Selection" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#51-f0-and-l0-families">
    5.1. F0 and L0 families
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#52-other-fx-and-lx-families">
    5.2. Other Fx and Lx families
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-lab-1-joystick-in-polling-mode">
    6. Lab 1: Joystick in Polling Mode
  </a>
<nav aria-label="6. Lab 1: Joystick in Polling Mode" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#61-start-a-new-project">
    6.1. Start a new project
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#62-enable-adc-peripheral">
    6.2. Enable ADC Peripheral
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#63-generated-code">
    6.3. Generated code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#64-single-channel-single-conversion">
    6.4. Single-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#65-multiple-channel-single-conversion">
    6.5. Multiple-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#66-continuous-conversion">
    6.6. Continuous Conversion
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../i2c-spi/">
        I2C - SPI
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../oled-ssd1306/">
        SSD1306 OLED
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_19" id="__nav_2_1_19" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1_19">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../free-rtos/" style="margin: initial; padding: initial; pointer-events: initial">
        
          FreeRTOS
        </a>
</label>
<nav aria-label="FreeRTOS" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_1_19">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../free-rtos/" style="margin: initial; padding: initial; pointer-events: initial">
          
            FreeRTOS
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../free-rtos/overview/">
        RTOS Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../free-rtos/systick/">
        RTOS SysTick
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../j-link-rtt/">
        J-Link RTT
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../j-link-sysview/">
        J-Link SysView
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../notes/">
        Notes
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../pi/" style="margin: initial; padding: initial; pointer-events: initial">
        
          Raspberry Pi
        </a>
</label>
<nav aria-label="Raspberry Pi" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../pi/" style="margin: initial; padding: initial; pointer-events: initial">
          
            Raspberry Pi
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/headless-mode/">
        Headless mode
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/compile-ffmpeg/">
        Compile FFmpeg
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/resource-usage/">
        Resource usage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/setup-camera/">
        Setup Camera
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/stream-ffmpeg-hls-dash/">
        HLS/DASH Streaming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/stream-picamera-mjpeg/">
        MJPEG streaming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/stream-picamera-h264/">
        H264 streaming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/backup-sdcard/">
        Backup SDCard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/check-camera-i2c/">
        Diagnostic Camera
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pi/notes/">
        Notes
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../c-cpp/" style="margin: initial; padding: initial; pointer-events: initial">
        
          C/C++
        </a>
</label>
<nav aria-label="C/C++" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../c-cpp/" style="margin: initial; padding: initial; pointer-events: initial">
          
            C/C++
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../c-cpp/notes/">
        Notes
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../lidar/" style="margin: initial; padding: initial; pointer-events: initial">
        
          Lidar
        </a>
</label>
<nav aria-label="Lidar" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../lidar/" style="margin: initial; padding: initial; pointer-events: initial">
          
            Lidar
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lidar/livox-sdk/">
        Livox SDK
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lidar/mapping/">
        Lidar Mapping
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../linux/" style="margin: initial; padding: initial; pointer-events: initial">
        
          Linux
        </a>
</label>
<nav aria-label="Linux" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../linux/" style="margin: initial; padding: initial; pointer-events: initial">
          
            Linux
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/byobu/">
        Byobu
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/samba/">
        Samba
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linux/tweaks/">
        Tweaks
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../ros/" style="margin: initial; padding: initial; pointer-events: initial">
        
          ROS
        </a>
</label>
<nav aria-label="ROS" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../ros/" style="margin: initial; padding: initial; pointer-events: initial">
          
            ROS
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ros/tutorial-beginner/">
        Tutorial for Beginners
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../setup-blog/" style="margin: initial; padding: initial; pointer-events: initial">
        
          Setup blog
        </a>
</label>
<nav aria-label="Setup blog" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../setup-blog/" style="margin: initial; padding: initial; pointer-events: initial">
          
            Setup blog
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-blog/markdown-syntax/">
        Markdown syntax
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-blog/mkdocs-plugins/">
        MkDocs plugins
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-blog/customize-theme/">
        Customize theme
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-blog/print-to-pdf/">
        Print to PDF
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-blog/fix-ajax-issue/">
        Fix AJAX issue
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" id="__nav_2_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../virtual-machine/" style="margin: initial; padding: initial; pointer-events: initial">
        
          Virtual machine
        </a>
</label>
<nav aria-label="Virtual machine" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
<a class="md-nav__link" href="../../virtual-machine/" style="margin: initial; padding: initial; pointer-events: initial">
          
            Virtual machine
          </a>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../virtual-machine/docker/">
        Docker
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../virtual-machine/hyper-v/">
        Hyper-V
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../projects/">
        Projects
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../archives/">
        Archives
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tags/">
        Tags
      </a>
</li>
</ul>
</nav>
<div class="tag-cloud-nav">
<p class="md-nav" style="margin-bottom: 0.5em;">
<label class="md-nav__title">Tag cloud</label>
</p>
<div class="tag-cloud-content">
<a class="tag" href="https://www.codeinsideout.com/tags/#livox">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkGreen;
        ">livox</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#c++">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">c++</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#restore">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">restore</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#rtt">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkGoldenrod;
        ">rtt</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#grep">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">grep</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ros">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkSlateGray;
        ">ros</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#v4l2">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">v4l2</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pdf">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">pdf</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ffmpeg">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkSlateBlue;
        ">ffmpeg</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#usart">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">usart</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#gnuplot">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">gnuplot</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pwm">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">pwm</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#distance">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">distance</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#mkdocs">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkTurquoise;
        ">mkdocs</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#toolchain">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">toolchain</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#arm">
<span class="tag-name" style="
          font-size:1.4rem;
          color:DarkGreen;
        ">arm</span>
<!--<sup class="tag-count">18</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#dma">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkRed;
        ">dma</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#debug">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkBlue;
        ">debug</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ssd1306">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">ssd1306</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#interrupt">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkViolet;
        ">interrupt</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#camera">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkSlateBlue;
        ">camera</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#semihosting">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">semihosting</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#omx">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateBlue;
        ">omx</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#dash">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">dash</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sdcard">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">sdcard</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#bash">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">bash</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#container">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">container</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ajax">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">ajax</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#hardware accelerator">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">hardware accelerator</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#stream">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkBlue;
        ">stream</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#css">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">css</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pulse">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">pulse</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#notes">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkOliveGreen;
        ">notes</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#lidar">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkGoldenrod;
        ">lidar</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#hls">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">hls</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#timer">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">timer</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sensor">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">sensor</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#mapping">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">mapping</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#picamera">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkRed;
        ">picamera</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#headless">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">headless</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#swv">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">swv</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#virtual">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">virtual</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#html">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">html</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#docs">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">docs</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#c">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateBlue;
        ">c</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#performance">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">performance</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#joystick">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">joystick</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#capture">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">capture</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#backup">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">backup</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pi">
<span class="tag-name" style="
          font-size:0.95rem;
          color:DarkSlateBlue;
        ">pi</span>
<!--<sup class="tag-count">9</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sysview">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateBlue;
        ">sysview</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#spi">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">spi</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#clock">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">clock</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#linux">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkSlateGray;
        ">linux</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#systick">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">systick</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#awk">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">awk</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#oled">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">oled</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#jinja">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">jinja</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#docker">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">docker</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#markdown">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">markdown</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#adc">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">adc</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#redirect">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">redirect</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#tutorial">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">tutorial</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sharing">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">sharing</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#i2c">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkGoldenrod;
        ">i2c</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#uart">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkCyan;
        ">uart</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#rtos">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkOliveGreen;
        ">rtos</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#tweaks">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">tweaks</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#mjpeg">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">mjpeg</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#gpio">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">gpio</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#samba">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">samba</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#top">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">top</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#board">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">board</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#python">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkSlateBlue;
        ">python</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#stm32">
<span class="tag-name" style="
          font-size:1.5rem;
          color:DarkOrchid;
        ">stm32</span>
<!--<sup class="tag-count">20</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#javascript">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkSlateGray;
        ">javascript</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#material">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">material</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#h264">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">h264</span>
<!--<sup class="tag-count">1</sup>-->
</a>
</div>
</div>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-analog-to-digital-converter">
    1. Analog to Digital Converter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-calibration">
    2. Calibration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-conversion-clock">
    3. Conversion clock
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-conversion-modes">
    4. Conversion Modes
  </a>
<nav aria-label="4. Conversion Modes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-single-channel-single-conversion-mode">
    4.1. Single-Channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-multiple-channel-single-conversion-mode">
    4.2. Multiple-channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-single-channel-continuous-conversion-mode">
    4.3. Single-Channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#44-multiple-channel-continuous-conversion-mode">
    4.4. Multiple-channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#45-injected-conversion-mode">
    4.5. Injected Conversion Mode
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-channel-selection">
    5. Channel Selection
  </a>
<nav aria-label="5. Channel Selection" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#51-f0-and-l0-families">
    5.1. F0 and L0 families
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#52-other-fx-and-lx-families">
    5.2. Other Fx and Lx families
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-lab-1-joystick-in-polling-mode">
    6. Lab 1: Joystick in Polling Mode
  </a>
<nav aria-label="6. Lab 1: Joystick in Polling Mode" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#61-start-a-new-project">
    6.1. Start a new project
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#62-enable-adc-peripheral">
    6.2. Enable ADC Peripheral
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#63-generated-code">
    6.3. Generated code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#64-single-channel-single-conversion">
    6.4. Single-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#65-multiple-channel-single-conversion">
    6.5. Multiple-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#66-continuous-conversion">
    6.6. Continuous Conversion
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
<div class="tag-cloud-toc">
<p class="md-nav" style="margin-bottom: 0.5em;">
<label class="md-nav__title">Tag cloud</label>
</p>
<div class="tag-cloud-content">
<a class="tag" href="https://www.codeinsideout.com/tags/#mkdocs">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkMagenta;
        ">mkdocs</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#debug">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkGoldenrod;
        ">debug</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#h264">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">h264</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#notes">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkMagenta;
        ">notes</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#spi">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">spi</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sdcard">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">sdcard</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#stm32">
<span class="tag-name" style="
          font-size:1.5rem;
          color:DarkTurquoise;
        ">stm32</span>
<!--<sup class="tag-count">20</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#css">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">css</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ssd1306">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">ssd1306</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#tweaks">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">tweaks</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#mjpeg">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">mjpeg</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#camera">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkSlateGray;
        ">camera</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#hls">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">hls</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#systick">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">systick</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#linux">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkSlateGray;
        ">linux</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#top">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">top</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#javascript">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkOrchid;
        ">javascript</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#markdown">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">markdown</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#material">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">material</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#awk">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">awk</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#jinja">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">jinja</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#usart">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">usart</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pwm">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">pwm</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#gnuplot">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">gnuplot</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pi">
<span class="tag-name" style="
          font-size:0.95rem;
          color:DarkGoldenrod;
        ">pi</span>
<!--<sup class="tag-count">9</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#adc">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">adc</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#samba">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">samba</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#c++">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">c++</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ffmpeg">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkSlateGray;
        ">ffmpeg</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#c">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">c</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#lidar">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkSlateBlue;
        ">lidar</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#gpio">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">gpio</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#restore">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">restore</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#oled">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">oled</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#redirect">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">redirect</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sysview">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">sysview</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#arm">
<span class="tag-name" style="
          font-size:1.4rem;
          color:DarkMagenta;
        ">arm</span>
<!--<sup class="tag-count">18</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#tutorial">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">tutorial</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#v4l2">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">v4l2</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#toolchain">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">toolchain</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#docs">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">docs</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#python">
<span class="tag-name" style="
          font-size:0.75rem;
          color:DarkMagenta;
        ">python</span>
<!--<sup class="tag-count">5</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#stream">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkCyan;
        ">stream</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#dash">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">dash</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#dma">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkViolet;
        ">dma</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pdf">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">pdf</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ros">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkBlue;
        ">ros</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sharing">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGoldenrod;
        ">sharing</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#interrupt">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkTurquoise;
        ">interrupt</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#timer">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkRed;
        ">timer</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#omx">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">omx</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#semihosting">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">semihosting</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#performance">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">performance</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#grep">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">grep</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#container">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">container</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#livox">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkBlue;
        ">livox</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#sensor">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">sensor</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#swv">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">swv</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#hardware accelerator">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkMagenta;
        ">hardware accelerator</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#ajax">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkGreen;
        ">ajax</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#virtual">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">virtual</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#html">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">html</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#uart">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkBlue;
        ">uart</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#capture">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">capture</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#docker">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">docker</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#joystick">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkSlateGray;
        ">joystick</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#mapping">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOliveGreen;
        ">mapping</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#board">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">board</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#picamera">
<span class="tag-name" style="
          font-size:0.65rem;
          color:DarkRed;
        ">picamera</span>
<!--<sup class="tag-count">3</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#distance">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">distance</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#clock">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkBlue;
        ">clock</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#i2c">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkGoldenrod;
        ">i2c</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#backup">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkViolet;
        ">backup</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#rtos">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkCyan;
        ">rtos</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#bash">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkTurquoise;
        ">bash</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#rtt">
<span class="tag-name" style="
          font-size:0.6rem;
          color:DarkMagenta;
        ">rtt</span>
<!--<sup class="tag-count">2</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#pulse">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkCyan;
        ">pulse</span>
<!--<sup class="tag-count">1</sup>-->
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#headless">
<span class="tag-name" style="
          font-size:0.55rem;
          color:DarkOrchid;
        ">headless</span>
<!--<sup class="tag-count">1</sup>-->
</a>
</div>
</div>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<style>
            .md-typeset .cover {
                margin-bottom: 1em;
            }
            @media print {
                .md-typeset .cover {
                    height: 100vh;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                }
            }
        </style>
<div class="cover">
<h1 class="page-title">Analog to Digital Converter</h1>
<p class="page-description">There are many types of analog devices connected to microcontrollers. These analog device generate a variable voltage in a meaningful range. That voltage level is read and converted to a number through an Analog to Digital Converter.</p>
<p class="page-tags">
<a class="tag" href="https://www.codeinsideout.com/tags/#arm">
<span class="tag-name">
                        #arm
                    </span>
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#stm32">
<span class="tag-name">
                        #stm32
                    </span>
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#adc">
<span class="tag-name">
                        #adc
                    </span>
</a>
<a class="tag" href="https://www.codeinsideout.com/tags/#joystick">
<span class="tag-name">
                        #joystick
                    </span>
</a>
</p>
<p class="md-source-date">
<hr style="margin-bottom: .5em;"/>
<small>
                            Last update:
                            <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-29 18:23:57</span>
</small>
</p>
</div>
<style>
            .md-typeset .toc {
                display: none;
            }
            .md-typeset .toc label {
                display: none;
            }
            .md-typeset .toc .md-nav {
                font-size: unset;
                line-height: 1.6;
            }
            .md-typeset .toc .md-nav--secondary {
                margin-left: -2em;
            }
            .md-typeset .toc .md-nav__list {
                margin: 0;
            }
            .md-typeset .toc ul {
                list-style: none;
            }
            @media print {
                .md-typeset .toc {
                    display: block;
                    page-break-after: always;
                }
                .md-typeset .toc .md-nav__link {
                    color: var(--md-typeset-a-color);
                }
                .md-typeset .toc .md-nav__link.md-nav__link--active {
                    font-weight: unset;
                }
            }
        </style>
<div class="toc">
<h2>Table of Content</h2>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-analog-to-digital-converter">
    1. Analog to Digital Converter
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-calibration">
    2. Calibration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-conversion-clock">
    3. Conversion clock
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-conversion-modes">
    4. Conversion Modes
  </a>
<nav aria-label="4. Conversion Modes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-single-channel-single-conversion-mode">
    4.1. Single-Channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-multiple-channel-single-conversion-mode">
    4.2. Multiple-channel, Single Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-single-channel-continuous-conversion-mode">
    4.3. Single-Channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#44-multiple-channel-continuous-conversion-mode">
    4.4. Multiple-channel, Continuous Conversion Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#45-injected-conversion-mode">
    4.5. Injected Conversion Mode
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-channel-selection">
    5. Channel Selection
  </a>
<nav aria-label="5. Channel Selection" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#51-f0-and-l0-families">
    5.1. F0 and L0 families
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#52-other-fx-and-lx-families">
    5.2. Other Fx and Lx families
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-lab-1-joystick-in-polling-mode">
    6. Lab 1: Joystick in Polling Mode
  </a>
<nav aria-label="6. Lab 1: Joystick in Polling Mode" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#61-start-a-new-project">
    6.1. Start a new project
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#62-enable-adc-peripheral">
    6.2. Enable ADC Peripheral
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#63-generated-code">
    6.3. Generated code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#64-single-channel-single-conversion">
    6.4. Single-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#65-multiple-channel-single-conversion">
    6.5. Multiple-Channel, Single Conversion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#66-continuous-conversion">
    6.6. Continuous Conversion
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
<div class="btn-actions screen-only">
<p><a class="md-button" href="..\..\..\pdfs\blog\stm32\adc\stm32__ADC.pdf"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7 7-7z"></path></svg></span>PDF</a><a class="md-button" href="https://github.com/vuquangtrong/STM32-Tutorials/blob/main/Archives/F051R8_ADC_Joystick.zip"><span class="twemoji"><svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><path d="m278.9 511.5-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2 43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6 144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path></svg></span> Joystick with F051</a></p>
</div>
<h2 id="1-analog-to-digital-converter">1. Analog to Digital Converter<a class="headerlink" href="#1-analog-to-digital-converter" title="Permanent link">⚓︎</a></h2>
<p>An Analog-to-Digital Converter (ADC) is able to acquire input voltage level and convert it to a number. The input voltage is compared against a well known and fixed voltage, also known as reference voltage. This reference voltage can be either derived from the V<sub>DDA</sub> domain or, in MCUs with high pin count, supplied by an external and fixed reference voltage generator V<sub>REF+</sub>. The majority of STM32 MCUs provide a 12-bit ADC. Some of them from the STM32F3 portfolio even a 16-bit ADC.</p>
<p>In almost all STM32 microcontrollers, the ADC is implemented as a <em>Successive Approximation Register ADC</em>. MCUs usually have more than ten channels, allowing to measure signals from external sources. Moreover, some internal channels are also available: a channel for internal temperature sensor (V<sub>SENSE</sub>), one for internal reference voltage (V<sub>REFINT</sub>), one for monitoring external V<sub>BAT</sub> power supply and a channel for monitoring LCD voltage in those MCUs providing a native monochrome passive LCD controller (for example, the STM32L053). ADCs implemented in STM32F3 and in majority of STM32L4 MCUs are also capable of converting fully differential inputs.</p>
<p>A/D conversion of the various channels can be performed in single, continuous, scan, or discontinuous mode. The result of the ADC is stored in a left- or right-aligned 16-bit data register. Moreover, the ADC also implements the analog watchdog feature, which allows the application to detect if the input voltage goes outside the user-defined higher or lower thresholds: if this happens, a dedicated IRQ fires.</p>
<p>
<figure><img src="adc_structure.png"/><figcaption>A simplified structure of an ADC</figcaption>
</figure>
</p>
<p>An <em>input selection and scan control unit</em> performs the selection of the input source to the ADC. Depending on the conversion mode (single, scan or continuous mode), this unit automatically switches among the input channels, so that every one can be sampled periodically. The output from this unit feeds the ADC.</p>
<p>The <em>start and stop control unit</em> is to control the A/D conversion process, and it can be triggered by software or by a variable number of input sources. Moreover, it is internally connected to the <code>TRGO</code> line of some timers so that time-driven conversions can be automatically performed in DMA mode.</p>
<p>
<figure class="w70"><img src="adc_sar_structure.png"/><figcaption>The internal structure of a SAR ADC</figcaption></figure>
</p>
<p>The input signal goes through the <em>Sample-and-Hold (SHA)</em> unit, a feature
available in all ADCs, to keep the input signal constant during the conversion cycle. To keep the voltage level of the input constant, the SHA is implemented with a network of capacitors: this ensure that source signal is kept at a certain level during the A/D conversion, which is a procedure that requires a given amount of time, depending on the conversion frequency chosen.</p>
<p>The output from the SHA module feeds a comparator that compares it with another signal generated by an internal DAC. The result of comparison is sent to the logic unit, which computes the numerical representation of the input signal according a well-characterized algorithm. This algorithm is what distinguishes SAR ADC from other A/D converters.</p>
<p>The <em>Successive Approximation</em> algorithm computes the voltage of the input signal by comparing it with the one generated by the internal DAC, which is a fraction of the V<sub>REF</sub> voltage: <em class="noem">if the input signal is higher than this internal reference voltage, then this is further increased until the input signal is lower</em>. The final result will correspond to a number ranging from zero to the maximum 12-bit unsigned integer. The SAR algorithm essentially performs a search in a binary tree. The great advantage of this algorithm is that the conversion is performed in N-cycles, where N corresponds to the ADC resolution. So a 12-bit ADC requires twelve cycles to perform a conversion.</p>
<h2 id="2-calibration">2. Calibration<a class="headerlink" href="#2-calibration" title="Permanent link">⚓︎</a></h2>
<p>The ADC has a calibration feature. During the procedure, the ADC calculates a calibration factor which is internally applied to the ADC until the next ADC power-off. The application must not use the ADC during calibration and must wait until it is complete.</p>
<p>Calibration should be performed before starting A/D conversion. It removes the offset error which may vary from chip to chip due to process variation. The calibration is initiated by software by setting bit <code>ADCAL=1</code>. Calibration can only be initiated when the ADC is disabled (when <code>ADEN=0</code>). <code>ADCAL</code> bit stays at 1 during all the calibration sequence. It is then cleared by hardware as soon the calibration completes. After this, the calibration factor can be read from the <code>ADC_DR</code> register (from bits 6 to 0).</p>
<h2 id="3-conversion-clock">3. Conversion clock<a class="headerlink" href="#3-conversion-clock" title="Permanent link">⚓︎</a></h2>
<p>The ADC clock mainly is derived from the APB clock, however it may have a dual clock-domain architecture on some MCU line:</p>
<ul>
<li>
<p>The ADC clock can be a specific clock source, named “ADC asynchronous clock” which is independent and asynchronous with the APB clock. It has the advantage of reaching the maximum ADC clock frequency whatever the APB clock scheme selected.</p>
</li>
<li>
<p>The ADC clock can be derived from the APB clock of the ADC bus interface, divided by a programmable factor (2/4/n) and <mark>it must not exceed 14 MHz</mark>. This has the advantage of bypassing the clock domain re-synchronizations. This can be useful when the ADC is triggered by a timer and if the application requires that the ADC is precisely triggered without any uncertainty.</p>
</li>
</ul>
<h2 id="4-conversion-modes">4. Conversion Modes<a class="headerlink" href="#4-conversion-modes" title="Permanent link">⚓︎</a></h2>
<p>ADCs implemented in STM32 MCUs provide several conversion modes useful to deal with different
application scenarios.</p>
<h3 id="41-single-channel-single-conversion-mode">4.1. Single-Channel, Single Conversion Mode<a class="headerlink" href="#41-single-channel-single-conversion-mode" title="Permanent link">⚓︎</a></h3>
<p>In this mode, the ADC performs the single conversion (single sample) of a single channel, then stops when conversion is finished.</p>
<h3 id="42-multiple-channel-single-conversion-mode">4.2. Multiple-channel, Single Conversion Mode<a class="headerlink" href="#42-multiple-channel-single-conversion-mode" title="Permanent link">⚓︎</a></h3>
<p>It’s also know as Scan Single Conversion Mode. A sequence can have up-to 16 channels, in a custom order. ADC module do not need to stop for CPU to configure the next channel, therefore, it saves CPU load can run in background. DMA is used to store converted data.</p>
<h3 id="43-single-channel-continuous-conversion-mode">4.3. Single-Channel, Continuous Conversion Mode<a class="headerlink" href="#43-single-channel-continuous-conversion-mode" title="Permanent link">⚓︎</a></h3>
<p>This mode converts a single channel continuously and indefinitely in regular channel conversion.
The continuous mode feature allows the ADC to work in the background. The ADC converts the
channels continuously without any intervention from the CPU. Additionally, the DMA can be used
in circular mode, thus reducing the CPU load.</p>
<h3 id="44-multiple-channel-continuous-conversion-mode">4.4. Multiple-channel, Continuous Conversion Mode<a class="headerlink" href="#44-multiple-channel-continuous-conversion-mode" title="Permanent link">⚓︎</a></h3>
<p>This mode is also called multichannel continuous mode and it can be used to convert some channels
successively with the ADC in independent mode. Scan conversions are carried out in DMA mode.</p>
<style>
    .small-image img {
        max-width: 50%;
    }
    .small-image2 img {
        max-width: 65%;
    }
</style>
<div class="row">
<div class="col small-image">
<div class="row">
<div class="col">
<p>
<figure><img src="adc_read_1ch_S.png"/><figcaption>1 Channel,<br/>Single Mode</figcaption>
</figure>
</p>
</div>
<div class="col">
<p>
<figure><img src="adc_read_Nch_S.png"/><figcaption>N-Channel,<br/>Single Mode</figcaption>
</figure>
</p>
</div>
</div>
</div>
<div class="col small-image2">
<div class="row">
<div class="col">
<p>
<figure><img src="adc_read_1ch_C.png"/><figcaption>1-Channel,<br/>Continuous Mode</figcaption>
</figure>
</p>
</div>
<div class="col">
<p>
<figure><img src="adc_read_Nch_C.png"/><figcaption>N-Channel,<br/>Continuous Mode</figcaption>
</figure>
</p>
</div>
</div>
</div>
</div>
<h3 id="45-injected-conversion-mode">4.5. Injected Conversion Mode<a class="headerlink" href="#45-injected-conversion-mode" title="Permanent link">⚓︎</a></h3>
<p>This mode is intended for use when conversion is triggered by an external event or by software. The injected group has priority over the regular channel group. It interrupts the conversion of the current channel in the regular channel group.</p>
<p>
<figure class="w60"><img src="adc_read_injected.png"/><figcaption>Injected conversion mode</figcaption></figure>
</p>
<p>For example, this mode can be used to synchronize the conversion of channels to an event. It is interesting in motor control applications where transistor switching generates noise that impacts ADC measurements and results in wrong conversions. Using a timer, the injected conversion mode can thus be implemented to delay the ADC measurements to after the transistor switching.</p>
<h2 id="5-channel-selection">5. Channel Selection<a class="headerlink" href="#5-channel-selection" title="Permanent link">⚓︎</a></h2>
<p>Depending on the STM32 family and package used, ADCs in STM32 MCUs can convert signals from a variable number of channels.</p>
<h3 id="51-f0-and-l0-families">5.1. F0 and L0 families<a class="headerlink" href="#51-f0-and-l0-families" title="Permanent link">⚓︎</a></h3>
<p><mark>In F0 and L0 families the allocation of channel is fixed</mark>: the first one is always IN0, the second IN1 and so on. User can decide only if a channel is enabled or not. This means that in scan mode the first sampled channel will be always IN0, the second IN1 and so on. <mark>The sampling speed is applied to all channel in F0 and L0 families</mark>.</p>
<p>To read 1-channel, it is needed to disable the previous configured channel. If more than 1 channel is enabled, ADC will work in N-channel modem, causing reading ADC value always returns the value of the first channel. This will be explained more in the Lab 1 which use an STM32<strong style="color:red;">F0</strong>51R8 MCU.</p>
<h3 id="52-other-fx-and-lx-families">5.2. Other Fx and Lx families<a class="headerlink" href="#52-other-fx-and-lx-families" title="Permanent link">⚓︎</a></h3>
<p>Other STM32 MCUs, instead, offer the notion of <em class="noem">group</em>. A group consists of a sequence of conversions that can be done on any channel and in any order. The reordering of channels is performed by assigning to them an index (called <em class="noem">rank</em>) ranging from 1 to 16. Those MCUs offering this possibility also allow to select the sampling speed of each channel individually, differently from F0/L0 MCUs where the configuration is ADC-wide.</p>
<p>There exist two groups for each ADC:</p>
<ul>
<li>A regular group, made of up to 16 channels, which corresponds to the sequence of sampled channels during a scan conversion.</li>
<li>An injected group, made of up to 4 channels, which corresponds to the sequence of injected channel if an injected conversion is performed.</li>
</ul>
<p>This will be explained more in the Lab 2 which use an STM32<strong style="color:red;">F4</strong>11CE MCU.</p>
<h2 id="6-lab-1-joystick-in-polling-mode">6. Lab 1: Joystick in Polling Mode<a class="headerlink" href="#6-lab-1-joystick-in-polling-mode" title="Permanent link">⚓︎</a></h2>
<p>The PS2 joystick module shown in the figure down below is basically a couple of potentiometers (variable resistors) that moves in 2 axises. This creates a voltage difference that can be read using any ADC peripheral on two analog pins: <code>VRX</code> and <code>VRY</code>.</p>
<p>
<figure class="w30"><img src="joystick.png"/><figcaption>A simple joystick</figcaption></figure>
</p>
<p><strong>Requirements</strong></p>
<ul>
<li>Read Joystick analog pins <code>VRX</code> and <code>VRY</code> stimulatingly</li>
<li>Transfer these value in raw number on UART1</li>
</ul>
<p><br>
<strong>Target board</strong>
Any board which has STM32 MCUs. This tutorial will be using the STM32F0 Discovery board, which features an STM32F051R8 Cortex-M0 MCU.</br></p>
<table>
<thead>
<tr>
<th>STM32F051R8</th>
<th>Mode</th>
<th>External peripheral</th>
</tr>
</thead>
<tbody>
<tr>
<td>PA9</td>
<td>Alternate Function</td>
<td>UART1 TX</td>
</tr>
<tr>
<td>PA10</td>
<td>Alternate Function</td>
<td>UART1 RX</td>
</tr>
<tr>
<td>PC8</td>
<td>GPIO Output</td>
<td>Blue LED</td>
</tr>
<tr>
<td>PC9</td>
<td>GPIO Output</td>
<td>Green LED</td>
</tr>
<tr>
<td>PA1</td>
<td>Analog Input 1</td>
<td>VRX</td>
</tr>
<tr>
<td>PA2</td>
<td>Analog Input 2</td>
<td>VRY</td>
</tr>
</tbody>
</table>
<h3 id="61-start-a-new-project">6.1. Start a new project<a class="headerlink" href="#61-start-a-new-project" title="Permanent link">⚓︎</a></h3>
<p>Open STM32CubeIDE and create a new STM32 with STM32F051R8 MCU by selecting the target board or just the target MCU.</p>
<p>Make sure to configure below settings:</p>
<ul>
<li>Set the <strong>HLCK</strong> to <em>48 MHz</em></li>
<li>Set the <strong>Debug</strong> mode to <em>Debug Serial Wire</em></li>
<li>Enable <strong>USART1</strong> with settings: <em>115200 bps, 8 bits, no Parity, and 1-bit stop</em></li>
<li>Set the <strong>PC8</strong> and <strong>PC9</strong> pins to <em>GPIO output</em> mode</li>
</ul>
<h3 id="62-enable-adc-peripheral">6.2. Enable ADC Peripheral<a class="headerlink" href="#62-enable-adc-peripheral" title="Permanent link">⚓︎</a></h3>
<p>In the <strong>ADC</strong> module under the <strong>Analog</strong> category, select below settings:</p>
<ul>
<li>Select Input Channel <strong>IN1</strong>, and <strong>IN2</strong></li>
<li>Clock Pre-scaler: If there is an dedicated HSI ADC clock source, <em class="noem">Asynchronous clock</em> can be selected. Otherwise, if the clock source is derived from APB clock, there is synchronous mode available there.</li>
<li>Continuous/Discontinuous Conversion Mode are disabled by default, as ADC is not in scan mode</li>
<li>DMA Continuous Request is disabled by default</li>
<li>End of Conversion flag is selected to be set at <em>End of single conversion</em></li>
<li>Overrun behavior is set to <em>Overrun Data Preserved</em></li>
<li>Sampling time: base on the required conversion speed<br>
    For example, select 239.5 cycles will result as 239.5 + 12 * 1/14000000 = 18 us (one conversion time), i.e. 55.5 KHz conversion rate.</br></li>
</ul>
<p>
<figure><img src="ide_adc_polling.png"/><figcaption>Setup ADC in polling mode</figcaption>
</figure>
</p>
<h3 id="63-generated-code" style="margin-top:0;">6.3. Generated code<a class="headerlink" href="#63-generated-code" title="Permanent link">⚓︎</a></h3>
<p>An ADC instance <code>ADC_HandleTypeDef hadc;</code> is created and the that ADC is initialized in the function <code>MX_ADC_Init()</code> in which the common settings will be applied. After that, it enable all selected channel for a converting sequence.</p>
<div class="highlight"><pre><span></span><code><span class="k">static</span> <span class="kt">void</span> <span class="nf">MX_ADC_Init_Single_Conversion</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ADC_ChannelConfTypeDef</span> <span class="n">sConfig</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="cm">/** Configure the global features of the ADC</span>
<span class="cm">  (Clock, Resolution, Data Alignment and number of conversion) */</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Instance</span> <span class="o">=</span> <span class="n">ADC1</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ClockPrescaler</span> <span class="o">=</span> <span class="n">ADC_CLOCK_ASYNC_DIV1</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Resolution</span> <span class="o">=</span> <span class="n">ADC_RESOLUTION_12B</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DataAlign</span> <span class="o">=</span> <span class="n">ADC_DATAALIGN_RIGHT</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ScanConvMode</span> <span class="o">=</span> <span class="n">ADC_SCAN_DIRECTION_FORWARD</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">EOCSelection</span> <span class="o">=</span> <span class="n">ADC_EOC_SINGLE_CONV</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">LowPowerAutoWait</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">LowPowerAutoPowerOff</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ContinuousConvMode</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DiscontinuousConvMode</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ExternalTrigConv</span> <span class="o">=</span> <span class="n">ADC_SOFTWARE_START</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ExternalTrigConvEdge</span> <span class="o">=</span> <span class="n">ADC_EXTERNALTRIGCONVEDGE_NONE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DMAContinuousRequests</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Overrun</span> <span class="o">=</span> <span class="n">ADC_OVR_DATA_PRESERVED</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">HAL_ADC_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span> <span class="n">Error_Handler</span><span class="p">();</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="64-single-channel-single-conversion">6.4. Single-Channel, Single Conversion<a class="headerlink" href="#64-single-channel-single-conversion" title="Permanent link">⚓︎</a></h3>
<p>To read an ADC channel, it is needed to configure one and only target channel. If there is more than one channel, ADC module will act as scan mode, and if the target channel has its number less than the first enabled channel, it will not be read.</p>
<p>Here is the sequence to read a channel</p>
<ol>
<li>Clear all channel registered in Channel Selection <code>CHSELR</code> register by assigning it to 0.</li>
<li>Enable the target channel by calling to <code>HAL_ADC_ConfigChannel()</code> with a configs having: Channel Number, <code>ADC_RANK_CHANNEL_NUMBER</code> rank, and Sample Time</li>
<li>Call to <code>HAL_ADC_Start()</code></li>
<li>Call to <code>HAL_ADC_PollForConversion()</code></li>
<li>Read the returned value with <code>HAL_ADC_GetValue()</code></li>
<li>Clear all channel registered in Channel Selection <code>CHSELR</code> register by assigning it to 0.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">Add_ADC_Channel</span><span class="p">(</span><span class="n">ADC_HandleTypeDef</span><span class="o">*</span> <span class="n">hadc</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">channel</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">sampling_time</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ADC_ChannelConfTypeDef</span> <span class="n">sConfig</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="cm">/** Configure for the selected ADC regular channel to be converted. */</span>
  <span class="n">sConfig</span><span class="p">.</span><span class="n">Channel</span> <span class="o">=</span> <span class="n">channel</span><span class="p">;</span>
  <span class="n">sConfig</span><span class="p">.</span><span class="n">Rank</span> <span class="o">=</span> <span class="n">ADC_RANK_CHANNEL_NUMBER</span><span class="p">;</span>
  <span class="n">sConfig</span><span class="p">.</span><span class="n">SamplingTime</span> <span class="o">=</span> <span class="n">sampling_time</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">HAL_ADC_ConfigChannel</span><span class="p">(</span><span class="n">hadc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sConfig</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span> <span class="n">Error_Handler</span><span class="p">();</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kt">uint32_t</span> <span class="nf">Read_ADC_Channel</span><span class="p">(</span><span class="n">ADC_HandleTypeDef</span><span class="o">*</span> <span class="n">hadc</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">channel</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">sampling_time</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">uint32_t</span> <span class="n">adc_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// clear all channel</span>
  <span class="n">hadc</span><span class="o">-&gt;</span><span class="n">Instance</span><span class="o">-&gt;</span><span class="n">CHSELR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">Add_ADC_Channel</span><span class="p">(</span><span class="n">hadc</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">sampling_time</span><span class="p">);</span>
  <span class="c1">// read</span>
  <span class="n">HAL_ADC_Start</span><span class="p">(</span><span class="n">hadc</span><span class="p">);</span>
  <span class="n">HAL_ADC_PollForConversion</span><span class="p">(</span><span class="n">hadc</span><span class="p">,</span> <span class="n">HAL_MAX_DELAY</span><span class="p">);</span>
  <span class="n">adc_value</span> <span class="o">=</span> <span class="n">HAL_ADC_GetValue</span><span class="p">(</span><span class="n">hadc</span><span class="p">);</span>
  <span class="n">HAL_ADC_Stop</span><span class="p">(</span><span class="n">hadc</span><span class="p">);</span>
  <span class="c1">// clear all channel</span>
  <span class="n">hadc</span><span class="o">-&gt;</span><span class="n">Instance</span><span class="o">-&gt;</span><span class="n">CHSELR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// return</span>
  <span class="k">return</span> <span class="n">adc_value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><br>
<strong>Read Joystick’s position</strong></br></p>
<p>As the ADC value is an 12-bit register, Joystick jas 2 channels, an array will be used to store the Joystick’s position. A buffer also is used to hold the message which will be sent on UART1.</p>
<div class="highlight"><pre><span></span><code><span class="kt">uint16_t</span> <span class="n">joystick</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span> <span class="c1">// xxxx,yyyy\r\n</span>
</code></pre></div>
<p>It is recommended to do ADC Calibration before activating the ADC conversion. Then in the main while loop, call to <code>Read_ADC()</code> on <code>ADC_CHANNEL_1</code> and <code>ADC_CHANNEL_2</code>. The 20 ms delay will help to reduce the conversion rate to about 50 Hz.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="cp">#if defined(ADC_1_CH_SINGLE_MODE)</span>
    <span class="n">MX_ADC_Init_Single_Conversion</span><span class="p">();</span>
    <span class="n">HAL_ADCEx_Calibration_Start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
    <span class="cp">#endif</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="cp">#ifdef ADC_1_CH_SINGLE_MODE</span>
        <span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">LED_GPIO_Port</span><span class="p">,</span> <span class="n">LED_Pin</span><span class="p">);</span>
        <span class="n">joystick</span><span class="p">[</span><span class="n">JS_X</span><span class="p">]</span> <span class="o">=</span> <span class="n">Read_ADC_Channel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">ADC_CHANNEL_1</span><span class="p">,</span>
                                          <span class="n">ADC_SAMPLETIME_239CYCLES_5</span><span class="p">);</span>
        <span class="n">joystick</span><span class="p">[</span><span class="n">JS_Y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Read_ADC_Channel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">ADC_CHANNEL_2</span><span class="p">,</span>
                                          <span class="n">ADC_SAMPLETIME_239CYCLES_5</span><span class="p">);</span>
        <span class="cp">#endif</span>
        <span class="n">HAL_UART_Transmit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">huart1</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span>
                                          <span class="n">HAL_MAX_DELAY</span><span class="p">);</span>
        <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Run the application and connect to the UART1 terminal, value of <code>VRX</code> and <code>VRY</code> will be printed out, like below:</p>
<p>
<figure><img src="lab_adc_polling_output_text.png"/><figcaption>Joystick’s position is printed in raw string</figcaption>
</figure>
</p>
<p>To visualize the data, use <a href="https://arduinogetstarted.com/tutorials/arduino-serial-plotter">Arduino Serial Plotter</a> feature or <a href="https://hackaday.io/project/5334-serialplot-realtime-plotting-software">SerialPlot</a> program.</p>
<div class="screen-only">
<p><video autoplay="" loop="" style="width:100%">
<source src="joystick_graph.mp4" type="video/mp4"/>
</video>
<figure>
<figcaption>Joystick’s value in a timeline graph</figcaption>
</figure></p>
</div>
<div class="print-only">
<p>
<figure><img src="joystick_graph.png"/><figcaption>Joystick’s value in a timeline graph</figcaption>
</figure>
</p>
</div>
<h3 id="65-multiple-channel-single-conversion">6.5. Multiple-Channel, Single Conversion<a class="headerlink" href="#65-multiple-channel-single-conversion" title="Permanent link">⚓︎</a></h3>
<p>In the <strong>Single Conversion</strong> mode, if multiple channels are registered, ADC module will automatically run int Multiple-Channel scan mode.</p>
<div class="admonition caution">
<p class="admonition-title">F0/L0 families use the channel numbers as the scan order in Multiple-Channel mode</p>
</div>
<p>In the <strong>Multiple-Channel mode</strong>, ADC module starts with the first activated channel which has smallest channel number when the function <code>HAL_ADC_Start()</code> is called.</p>
<p>For each subsequence call of <code>HAL_ADC_PollForConversion()</code>, ADC module read the channel then move to the next channel, and wait for next polling call.</p>
<div class="np"></div>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="cp">#if defined(ADC_1_CH_SINGLE_MODE) || defined(ADC_N_CH_SINGLE_MODE)</span>
    <span class="n">MX_ADC_Init_Single_Conversion</span><span class="p">();</span>
    <span class="n">HAL_ADCEx_Calibration_Start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
    <span class="cp">#endif</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="cp">#ifdef ADC_N_CH_SINGLE_MODE</span>
        <span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">LED_GPIO_Port</span><span class="p">,</span> <span class="n">LED_Pin</span><span class="p">);</span>
        <span class="n">HAL_ADC_Start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
        <span class="n">HAL_ADC_PollForConversion</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">HAL_MAX_DELAY</span><span class="p">);</span>
        <span class="n">joystick</span><span class="p">[</span><span class="n">JS_X</span><span class="p">]</span> <span class="o">=</span> <span class="n">HAL_ADC_GetValue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
        <span class="n">HAL_ADC_PollForConversion</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">HAL_MAX_DELAY</span><span class="p">);</span>
        <span class="n">joystick</span><span class="p">[</span><span class="n">JS_Y</span><span class="p">]</span> <span class="o">=</span> <span class="n">HAL_ADC_GetValue</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
        <span class="n">HAL_ADC_Stop</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">);</span>
        <span class="cp">#endif</span>
        <span class="n">HAL_UART_Transmit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">huart1</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span>
                                            <span class="n">HAL_MAX_DELAY</span><span class="p">);</span>
        <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="66-continuous-conversion">6.6. Continuous Conversion<a class="headerlink" href="#66-continuous-conversion" title="Permanent link">⚓︎</a></h3>
<p>ADC module will not stop in this mode. When it finishes converting the last channel, it go back to the first channel and then do conversion again.</p>
<p>The modified points are:</p>
<ul>
<li><strong>Continuous Conversion</strong> Mode is <em>enabled</em></li>
<li><strong>DMA Continuous Request</strong> is <em>enabled</em></li>
<li><strong>End of Conversion flag</strong> is selected to be set at <em>End of sequence of conversion</em></li>
<li><strong>DMA Settings</strong> is set to <em>Circular</em> mode, Data <em>increment for Memory</em> with <em>Half-Word</em> width</li>
</ul>
<p>
<figure><img src="ide_adc_continuos_dma.png"/><figcaption>Setup ADC in continuous mode with DMA</figcaption>
</figure>
</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">MX_ADC_Init_Continuous_Conversion</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Instance</span> <span class="o">=</span> <span class="n">ADC1</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ClockPrescaler</span> <span class="o">=</span> <span class="n">ADC_CLOCK_ASYNC_DIV1</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Resolution</span> <span class="o">=</span> <span class="n">ADC_RESOLUTION_12B</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DataAlign</span> <span class="o">=</span> <span class="n">ADC_DATAALIGN_RIGHT</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ScanConvMode</span> <span class="o">=</span> <span class="n">ADC_SCAN_DIRECTION_FORWARD</span><span class="p">;</span>
<span class="hll">  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">EOCSelection</span> <span class="o">=</span> <span class="n">ADC_EOC_SEQ_CONV</span><span class="p">;</span>
</span>  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">LowPowerAutoWait</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">LowPowerAutoPowerOff</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
<span class="hll">  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ContinuousConvMode</span> <span class="o">=</span> <span class="n">ENABLE</span><span class="p">;</span>
</span><span class="hll">  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DiscontinuousConvMode</span> <span class="o">=</span> <span class="n">DISABLE</span><span class="p">;</span>
</span>  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ExternalTrigConv</span> <span class="o">=</span> <span class="n">ADC_SOFTWARE_START</span><span class="p">;</span>
  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">ExternalTrigConvEdge</span> <span class="o">=</span> <span class="n">ADC_EXTERNALTRIGCONVEDGE_NONE</span><span class="p">;</span>
<span class="hll">  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">DMAContinuousRequests</span> <span class="o">=</span> <span class="n">ENABLE</span><span class="p">;</span>
</span>  <span class="n">hadc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Overrun</span> <span class="o">=</span> <span class="n">ADC_OVR_DATA_PRESERVED</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">HAL_ADC_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Error_Handler</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Then DMA moduel is linked to the ADC module in the function <code>HAL_ADC_MspInit()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">HAL_ADC_MspInit</span><span class="p">(</span><span class="n">ADC_HandleTypeDef</span><span class="o">*</span> <span class="n">hadc</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">GPIO_InitTypeDef</span> <span class="n">GPIO_InitStruct</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="k">if</span><span class="p">(</span><span class="n">hadc</span><span class="o">-&gt;</span><span class="n">Instance</span><span class="o">==</span><span class="n">ADC1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">__HAL_RCC_ADC1_CLK_ENABLE</span><span class="p">();</span>
    <span class="n">__HAL_RCC_GPIOA_CLK_ENABLE</span><span class="p">();</span>
    <span class="cm">/**ADC GPIO Configuration</span>
<span class="cm">    PA1     ------&gt; ADC_IN1</span>
<span class="cm">    PA2     ------&gt; ADC_IN2 */</span>
    <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Pin</span> <span class="o">=</span> <span class="n">GPIO_PIN_1</span><span class="o">|</span><span class="n">GPIO_PIN_2</span><span class="p">;</span>
    <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Mode</span> <span class="o">=</span> <span class="n">GPIO_MODE_ANALOG</span><span class="p">;</span>
    <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Pull</span> <span class="o">=</span> <span class="n">GPIO_NOPULL</span><span class="p">;</span>
    <span class="n">HAL_GPIO_Init</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GPIO_InitStruct</span><span class="p">);</span>
    <span class="cm">/* ADC1 DMA Init */</span>
    <span class="cm">/* ADC Init */</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Instance</span> <span class="o">=</span> <span class="n">DMA1_Channel1</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Direction</span> <span class="o">=</span> <span class="n">DMA_PERIPH_TO_MEMORY</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">PeriphInc</span> <span class="o">=</span> <span class="n">DMA_PINC_DISABLE</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">MemInc</span> <span class="o">=</span> <span class="n">DMA_MINC_ENABLE</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">PeriphDataAlignment</span> <span class="o">=</span> <span class="n">DMA_PDATAALIGN_HALFWORD</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">MemDataAlignment</span> <span class="o">=</span> <span class="n">DMA_MDATAALIGN_HALFWORD</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Mode</span> <span class="o">=</span> <span class="n">DMA_CIRCULAR</span><span class="p">;</span>
    <span class="n">hdma_adc</span><span class="p">.</span><span class="n">Init</span><span class="p">.</span><span class="n">Priority</span> <span class="o">=</span> <span class="n">DMA_PRIORITY_LOW</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HAL_DMA_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hdma_adc</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">Error_Handler</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">__HAL_LINKDMA</span><span class="p">(</span><span class="n">hadc</span><span class="p">,</span><span class="n">DMA_Handle</span><span class="p">,</span><span class="n">hdma_adc</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>After that, add channel want to be read, and start the ADC in DMA mode. Make sure to set the buffer and the length for DMA.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="cp">#if defined(ADC_1_CH_CONTINUOUS_MODE)</span>
    <span class="n">Add_ADC_Channel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">ADC_CHANNEL_1</span><span class="p">,</span> <span class="n">ADC_SAMPLETIME_239CYCLES_5</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(ADC_N_CH_SINGLE_MODE) || defined(ADC_N_CH_CONTINUOUS_MODE)</span>
    <span class="n">Add_ADC_Channel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">ADC_CHANNEL_1</span><span class="p">,</span> <span class="n">ADC_SAMPLETIME_239CYCLES_5</span><span class="p">);</span>
<span class="hll">    <span class="n">Add_ADC_Channel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="n">ADC_CHANNEL_2</span><span class="p">,</span> <span class="n">ADC_SAMPLETIME_239CYCLES_5</span><span class="p">);</span>
</span><span class="hll"><span class="cp">#endif</span>
</span>
<span class="cp">#if defined(ADC_1_CH_CONTINUOUS_MODE)</span>
    <span class="n">HAL_ADC_Start_DMA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="o">*</span><span class="p">)</span><span class="n">joystick</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(ADC_N_CH_CONTINUOUS_MODE)</span>
    <span class="n">HAL_ADC_Start_DMA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hadc</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="o">*</span><span class="p">)</span><span class="n">joystick</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="hll"><span class="cp">#endif</span>
</span>    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>That’s all for this tutorial. The Discontinuous and Injected Scan mode will be covered in other guides.</p>
<div data-value="https://www.codeinsideout.com/blog/stm32/adc/" id="page_url"></div>
<div data-value="blog/stm32/adc/" id="page_identifier"></div>
<div>
<h2 id="__comments">Comments</h2>
<div id="disqus_thread"></div>
<script>var disqus_config = function () { this.page.url = "https://www.codeinsideout.com/blog/stm32/adc/", this.page.identifier = "blog/stm32/adc/" }; window.addEventListener("load", function () { var e = document, i = e.createElement("script"); i.src = "//vuquangtrong-github-io.disqus.com/embed.js", i.setAttribute("data-timestamp", +new Date), (e.head || e.body).appendChild(i) })</script>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" data-md-state="hidden" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: US-100 Sensor" class="md-footer__link md-footer__link--prev" href="../sensor-us-100/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              US-100 Sensor
            </div>
</div>
</a>
<a aria-label="Next: I2C - SPI" class="md-footer__link md-footer__link--next" href="../i2c-spi/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              I2C - SPI
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            © 2021 Code Inside Out <div style="display:none"><div>
</div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div>
    using
    <a href="https://github.com/vuquangtrong/mkdocs-material-blog">
        MkDocs Material Blog
    </a>
    theme
</div>
</div>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/vuquangtrong" rel="noopener" target="_blank" title="vuquangtrong">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://facebook.com/trongvq" rel="noopener" target="_blank" title="trongvq">
<svg viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="m279.14 288 14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://www.linkedin.com/in/vqtrong" rel="noopener" target="_blank" title="vqtrong">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
<script src="../../../assets/javascripts/bundle.ddd52ceb.min.js"></script>
<script src="../../../assets/view-bigimg.js"></script>
<script src="../../../assets/extra.js"></script>
</body>
</html>